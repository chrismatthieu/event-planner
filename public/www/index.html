<!DOCTYPE html>
<html lang="en">
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1"> 
		<title>RubyAZ</title>

		<script src="http://code.jquery.com/jquery-1.7.2.js" type="text/javascript"></script>

		<script type="text/javascript">
			// Adds back button to all pages
			$(document).bind("mobileinit", function() {
			      $.mobile.page.prototype.options.addBackBtn = true;
			 });
		</script>

		<script src="jquery.mobile-1.1.1.js" type="text/javascript"></script>
		<link rel='stylesheet' href='jquery.mobile-1.1.1.css' type='text/css'>
		
		<script src="phonegap-1.1.0.js" type="application/x-javascript" charset="utf-8"></script>
		<script src="ChildBrowser.js" type="application/x-javascript" charset="utf-8"></script>
		
	</head>
	<body>
						
		<script type="application/x-javascript" charset="utf-8">

				
		    function loadPage(eventUrl){ 

		        client_browser = ChildBrowser.install(); 
		        // client_browser.onLocationChange = function(loc){ locChanged(loc); };
		        if(client_browser != null) {  window.plugins.childBrowser.showWebPage(eventUrl); }
		    }

					// 		    function locChanged(loc){
					// 
					// 		       if (/gettoken/.test(loc)) { 
					//    					Code = loc.match(/code=(.*)$/)[1];
					// $("#login").hide();
					// $("#dialpad").show();
					// 
					// 				  	client_browser.close();
					// 		       }
					// 		    }

            // Call onDeviceReady when PhoneGap is loaded.
            //
            // At this point, the document has loaded but phonegap.js has not.
            // When PhoneGap is loaded and talking with the native device,
            // it will call the event `deviceready`.
            // 
            document.addEventListener("deviceready", onDeviceReady, false);
            
            
		</script>
		
		<div data-role="page" data-add-back-btn="true">

			<div data-role="header">				
				<h1>RubyAZ</h1>
			</div><!-- /header -->
			<div data-role="content">
												
				<div id="search" style="display:block;">					
					<ul data-role="listview" data-inset="true">
						<li><a href="#" data-transition="slide">Event Planner</a>
							<ul data-role="listview" data-inset="true">
								<li>
									<p>Enter a topic:</p>
									<p>
										<input type="text" id="q" name="q" class="input input-xlarge search-query">	
										<button id="submit"  data-role="button" data-icon="search">Search</button>
									</p>

									<div id="spinner" style="display:none;"><img src="images/ajax-loader.gif"></div>
									<div id="result"></div>
									
									
									<script>

									$(document).ready(function(){ 

									   $("#submit").click(function() {

											$("#spinner").show();
											$("#result").empty();
											$("#result").fadeOut("slow", function(){
											$.get('http://localhost:4567/lookupmobile', { q: $("#q").val() }, function(data){
												$("#spinner").hide();
												$("#result").html(data);
												$("ul").listview();
                                                $("span").directorystatus();
											});
										});
										$("#result").fadeIn("slow");
									   });

									});

									</script>

								</li>
							</ul>
						</li>
					</ul>
					
					
				</div>
				
			</div><!-- /content -->

		</div><!-- /page -->
		
	</body>
</html>

